<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <title>【 iOS 】NSString 要使用 copy 還是 strong 呢？</title>

  <meta name="author" content="Martin Huang">
  <meta name="description" content=" meta description ">

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">

  <!-- Favicon -->
  <link rel="icon" href="https://martinios.com/images/favicon.png" type="image/x-icon">

  <!-- CSS Plugins -->
  
<link rel="preconnect" href="https://fonts.gstatic.com">











<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Mulish:wght@500;600;700;800;900&amp;display=swap">




<link rel="stylesheet" href="https://martinios.com/css/vendor.min.f38e7c7e6ab34c94774fb608f1bb6b5912854002ca41fa9c63fd334fcddbd97e26be4783c0f6fd40b8fc78776c7169352bbc43ccfa6f56de22009e059d7401e1.css" integrity="sha512-8458fmqzTJR3T7YI8btrWRKFQALKQfqcY/0zT83b2X4mvkeDwPb9QLj8eHdscWk1K7xDzPpvVt4iAJ4FnXQB4Q==" media="screen">

</head>

<body>
  
<div class="preloader"></div>

  <div class="header-height-fix"></div>
<header class="header-nav">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <nav class="navbar navbar-expand-lg navbar-light p-0">
          <a class="navbar-brand font-weight-bold mr-0" href="https://martinios.com/">
            
            <img loading="lazy" src="https://martinios.com/images/logo.png" alt="PmThinking產品人-實用工具x高效生活" height="50px">
            
          </a>

          
          <button class="search-toggle d-inline-block d-lg-none ml-auto mr-3" data-toggle="search" aria-label="Search Toggle">
            <i class="las la-search"></i>
          </button>
          

          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navHeader" aria-controls="navHeader" aria-expanded="false" aria-label="Toggle navigation">
            <i class="d-inline lab la-buromobelexperte"></i>
            <i class="d-none las la-times"></i>
          </button>

          <div class="collapse navbar-collapse" id="navHeader">
            <ul class="navbar-nav mx-auto">

              
              
              
              
              
              <li class="nav-item ">
                <a class="nav-link" href="https://martinios.com/">首頁</a>
              </li>
              
              
              
              
              
              <li class="nav-item ">
                <a class="nav-link" href="https://martinios.com/categories/manager/">PM知識</a>
              </li>
              
              
              
              
              
              <li class="nav-item ">
                <a class="nav-link" href="https://martinios.com/categories/develope/">程式開發</a>
              </li>
              
              
              
              
              
              <li class="nav-item ">
                <a class="nav-link" href="https://martinios.com/categories/life/">漫漫寫作</a>
              </li>
              
              
              
              
              
              <li class="nav-item ">
                <a class="nav-link" href="https://martinios.com/about/">關於</a>
              </li>
              
              
              
              
              
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle d-inline-block " href="#" role="button" data-toggle="dropdown" aria-expanded="false">更多</a>
                <ul class="dropdown-menu">
                  
                  <li><a class="dropdown-item " href="https://martinios.com/blog/">所有文章</a></li>
                  
                  <li><a class="dropdown-item " href="https://martinios.com/categories/">分類</a></li>
                  
                  <li><a class="dropdown-item " href="https://martinios.com/tags/">標籤</a></li>
                  
                  <li><a class="dropdown-item " href="https://martinios.com/contact/">聯絡我</a></li>
                  
                  <li><a class="dropdown-item " href="https://martinios.com/elements/">Elements</a></li>
                  
                </ul>
              </li>
              
              
            </ul>
            
            
            <div class="navbar-right d-none d-lg-inline-block">
              <ul class="social-links list-unstyled list-inline">
                <li class="list-inline-item ml-4 d-none d-lg-inline-block">
                  <button class="search-toggle" data-toggle="search" aria-label="Search Toggle">
                    <i class="las la-search"></i>
                  </button>
                </li>
              </ul>
            </div>
            
          </div>
        </nav>
      </div>
    </div>
  </div>
</header>


<div class="search-block">
  <div data-toggle="search-close">
    <i class="las la-times text-primary"></i>
  </div>
  <form action="/search">
    <input id="search-query" name="s" type="search" placeholder="Type words &amp; hit enter" class="text-center" aria-label="search-query">
  </form>
</div>

  
  




<section class="section-sm">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <div class="text-center mb-5">
          <h3 class="h2 mb-4 post-title">【 iOS 】NSString 要使用 copy 還是 strong 呢？</h3>
          <ul class="card-meta list-inline">
            <li class="list-inline-item">
              <a href="#!" class="card-meta-author">
                
                <a href="https://martinios.com/author/martin-huang/" class="card-meta-author">
                  <img loading="lazy" src="https://martinios.com/images/author/author.jpg" alt="Martin Huang">
                  <span>Martin Huang</span>
                </a>
                
              </a>
            </li>
            <li class="list-inline-item">|</li>
            <li class="list-inline-item">
              <span>28 December 2020</span>
            </li>
          </ul>
        </div>

        

        <div class="content">
          <p>最近在複習 iOS 面試題系列，看到這一題想起幾年前剛接觸 Objective-C ，剛開始觀念還沒有建立起來，也曾經因為這個屬性花了不少時間Debug，雖然現在觀念已經搞懂了，但還是趁這個機會複習筆記一下。</p>
<h2 id="什麼情況下會有差異">什麼情況下會有差異？</h2>
<p>你可以先記得，大部分的情況都會使用copy。</p>
<p>而 copy 與 strong 的差別，在於 copy 是儲存「值」，strong 是儲存「記憶體位址」。</p>
<h2 id="舉個例子">舉個例子</h2>
<pre><code class="language-objectivec=" data-lang="objectivec=">// .h file
@property (strong,nonatomic) NSString *strongStr;
@property (copy, nonatomic)  NSString *copyStr;
</code></pre><pre><code class="language-objectivec=" data-lang="objectivec=">// .m file
NSMutableString *mutableStr = [NSMutableString stringWithFormat:@&quot;abc&quot;];

// 將mutableStr賦值給retainStr、copyStr
self.strongStr = mutableStr;
self.copyStr = mutableStr;

// 將 mutableStr 更改為 xyz
[mutableStr appendString:@&quot;xyz&quot;];

// 印出三個字串的值
NSLog(@&quot;mutableStr = %@&quot;,mutableStr);
NSLog(@&quot;strongStr = %@&quot;,self.strongStr);
NSLog(@&quot;copyStr = %@&quot;,self.copyStr);

// 輸出值
// mutableStr = xyz
// strongStr = xyz
// copyStr = abc

</code></pre><p>可以發現，此時 copy 屬性字串並不會因為賦值來源而更改值，反而是strong屬性的字串隨著來源而改變了。<br>
這是因為 copy 屬性是對於來源做了深拷貝，是將 mutableStr 的數值複製到了 copyStr 上；而 strong 屬性是指向來源的記憶體位址，所以當原本的 mutableStr 改變時，strongStr 也會跟著改變。</p>
<hr>
<p>接著我們在來看一下這三個字串的記憶體位址</p>
<pre><code class="language-objectivec=" data-lang="objectivec=">// 印出三個字串的記憶體位址
mutableStr = abcxyz
StrStrong = abcxyz
StrCopy = abc

// 輸出記憶體位址
// mutableStr = 0x6000030ee520
// StrStrong = 0x6000030ee520
// StrCopy = 0xc09e09c05a166394
</code></pre><p>這時候我們可以看到 mutableStr 與 StrStrong 的記憶體位址是相同的，代表他們兩個儲存值的地方是一樣的，所以才會造成改變 mutableStr 後 StrStrong 也跟著更改的情況。</p>
<h2 id="小結">小結</h2>
<p>比較簡單的記憶法就是 NSString 用 Copy 就好，因為實務上也很少會使用    Strong 屬性的情境。<br>
雖然現在 Objective-C 比較少人在用了，不過有時候面試還是會考到類似的觀念題，所以邊複習邊整理文章，希望對開發者有些幫助。</p>

        </div>
      </div>
    </div>

    <div class="single-post-meta">
      <div class="row justify-content-center">
        <div class="col-lg-5 col-md-6 text-center text-md-left">
          <ul class="post-meta-tags list-unstyled list-inline">
            
            <li class="list-inline-item"><a href="https://martinios.com/tags/ios">iOS</a></li>
            
            <li class="list-inline-item"><a href="https://martinios.com/tags/swift">Swift</a></li>
            
            <li class="list-inline-item"><a href="https://martinios.com/tags/objective-c">Objective-C</a></li>
            
          </ul>
        </div>
        <div class="col-lg-5 col-md-6 text-center text-md-right mt-4 mt-md-0">
<ul class="social-links has-bg-color list-unstyled list-inline" style="line-height:0">
  <li class="list-inline-item">
    
    <a class="resp-sharing-button__link d-block" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmartinios.com%2fblog%2fios-nsstring-copy-or-strong%2f" target="_blank"
      rel="noopener" aria-label="">
      <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <i class="lab la-facebook-f text-dark"></i>
        </div>
      </div>
    </a>
  </li>

  <li class="list-inline-item">
    
    <a class="resp-sharing-button__link d-block" href="https://twitter.com/intent/tweet/?text=%e3%80%90%20iOS%20%e3%80%91NSString%20%e8%a6%81%e4%bd%bf%e7%94%a8%20copy%20%e9%82%84%e6%98%af%20strong%20%e5%91%a2%ef%bc%9f&amp;url=https%3a%2f%2fmartinios.com%2fblog%2fios-nsstring-copy-or-strong%2f"
      target="_blank" rel="noopener" aria-label="">
      <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <i class="lab la-twitter text-dark"></i>
        </div>
      </div>
    </a>
  </li>

  <li class="list-inline-item">
    
    <a class="resp-sharing-button__link d-block" href="https://plus.google.com/share?url=https%3a%2f%2fmartinios.com%2fblog%2fios-nsstring-copy-or-strong%2f" target="_blank"
      rel="noopener" aria-label="">
      <div class="resp-sharing-button resp-sharing-button--google resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <i class="lab la-google-plus-g text-dark"></i>
        </div>
      </div>
    </a>
  </li>

  <li class="list-inline-item">
    
    <a class="resp-sharing-button__link d-block" href="mailto:?subject=%e3%80%90%20iOS%20%e3%80%91NSString%20%e8%a6%81%e4%bd%bf%e7%94%a8%20copy%20%e9%82%84%e6%98%af%20strong%20%e5%91%a2%ef%bc%9f&amp;body=https%3a%2f%2fmartinios.com%2fblog%2fios-nsstring-copy-or-strong%2f" target="_self"
      rel="noopener" aria-label="">
      <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <i class="las la-envelope text-dark"></i>
        </div>
      </div>
    </a>
  </li>

  <li class="list-inline-item">
    
    <a class="resp-sharing-button__link d-block" href="whatsapp://send?text=%e3%80%90%20iOS%20%e3%80%91NSString%20%e8%a6%81%e4%bd%bf%e7%94%a8%20copy%20%e9%82%84%e6%98%af%20strong%20%e5%91%a2%ef%bc%9f%20https%3a%2f%2fmartinios.com%2fblog%2fios-nsstring-copy-or-strong%2f" target="_blank"
      rel="noopener" aria-label="">
      <div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--small">
        <div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
          <i class="lab la-whatsapp text-dark"></i>
        </div>
      </div>
    </a>
  </li>

</ul></div>
      </div>
    </div>

    <div class="single-post-author">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="media d-block d-sm-flex text-center text-sm-left">
            
            <a href="https://martinios.com/author/martin-huang/"><img loading="lazy" class="img-fluid rounded-circle mr-0 mr-sm-4 mb-4" src="https://martinios.com/images/author/author.jpg" alt="Martin Huang"></a>
            <div class="media-body">
              <p class="font-primary mb-1">Written By</p>
              <h4><a href="https://martinios.com/author/martin-huang/" class="text-dark font-weight-700">Martin Huang</a></h4>
              <p class="font-primary">Maecenas sit amet purus eget ipsum elementum venenatis. Aenean maximus urna magna elementum venenatis, quis rutrum mi semper non purus eget ipsum elementum venenatis.
Purus eget ipsum elementum venenatis. Aenean maximus urna magna elementum …</p>
              <ul class="social-links list-unstyled list-inline ml-0 ml-sm-n2">
                
                <li class="list-inline-item"><a href="https://facebook.com">
                    <i class="lab la-facebook-f"></i>
                  </a></li>
                
                <li class="list-inline-item"><a href="https://twitter.com">
                    <i class="lab la-twitter"></i>
                  </a></li>
                
                <li class="list-inline-item"><a href="https://linkedin.com">
                    <i class="lab la-linkedin-in"></i>
                  </a></li>
                
              </ul>
            </div>
            
          </div>
        </div>
      </div>
    </div>

    <div class="single-post-similer">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <div class="row mt-3">
            <div class="col-12">
              <h3 class="text-dark font-weight-800 mb-4 pb-2">You May Also Like</h3>
            </div>
            
              
            <div class="col-md-6">
              <article class="card post-card">
  
  <a href="https://martinios.com/blog/ios-information-security-swiftshield/">
    <img loading="lazy" class="w-100 rounded" src="https://i.imgur.com/Xa73TNl.png" alt="【 iOS 】資訊安全加固方案 - 程式碼混淆(SwiftShield)">
  </a>
  
  <div class="card-body">
    <ul class="card-meta list-inline mb-2">
      <li class="list-inline-item mb-2">
        
        <a href="https://martinios.com/author/martin-huang/" class="card-meta-author">
          
          <img loading="lazy" src="https://martinios.com/images/author/author.jpg" alt="Martin Huang">
          
          <span>Martin Huang</span>
        </a>
        
      </li>
      <li class="list-inline-item mb-2">
        <span>09 Apr, 2020</span>
      </li>
      <li class="list-inline-item mb-2">
        <ul class="card-meta-tag list-inline">
          
          <li class="list-inline-item"><a href="https://martinios.com/tags/ios">iOS</a></li>
          
          <li class="list-inline-item"><a href="https://martinios.com/tags/swift">Swift</a></li>
          
          <li class="list-inline-item"><a href="https://martinios.com/tags/security">Security</a></li>
          
        </ul>
      </li>
    </ul>
    <h3 class="mb-3">
      <a class="post-title" href="https://martinios.com/blog/ios-information-security-swiftshield/">【 iOS 】資訊安全加固方案 - 程式碼混淆(SwiftShield)</a>
    </h3>
    <p>最近專案接到需求，為了避免程式被反解譯，也避免程式的核心業務邏輯暴露在外，故開始尋找 App 加固的方案。
資訊安全這門領域其實很深，那既然剛入門我們就從基礎的開始，程式碼混淆在資安方案中算是 CP 值比較高的，開發者混淆時付出一些時間(熟悉以後還可以自動化)，但讓駭客就要多付出好幾倍的時間去破解你 …</p>

    
  </div>
</article>
            </div>
            
            <div class="col-md-6">
              <article class="card post-card">
  
  <div class="card-body">
    <ul class="card-meta list-inline mb-2">
      <li class="list-inline-item mb-2">
        
        <a href="https://martinios.com/author/martin-huang/" class="card-meta-author">
          
          <img loading="lazy" src="https://martinios.com/images/author/author.jpg" alt="Martin Huang">
          
          <span>Martin Huang</span>
        </a>
        
      </li>
      <li class="list-inline-item mb-2">
        <span>04 Dec, 2020</span>
      </li>
      <li class="list-inline-item mb-2">
        <ul class="card-meta-tag list-inline">
          
          <li class="list-inline-item"><a href="https://martinios.com/tags/ios">iOS</a></li>
          
          <li class="list-inline-item"><a href="https://martinios.com/tags/xcode">Xcode</a></li>
          
          <li class="list-inline-item"><a href="https://martinios.com/tags/develope">develope</a></li>
          
        </ul>
      </li>
    </ul>
    <h3 class="mb-3">
      <a class="post-title" href="https://martinios.com/blog/mac-fix-touchbar/">【 Mac 】解決 Touch Bar 失效問題</a>
    </h3>
    <p>自從蘋果在 2016 年在 Macbook 新增 TouchBar 之後，Macbook的使用上又多了一種方式。
但有時候在使用上會遇到一些奇怪的Bug，舉凡 TouchBar 失靈、Esc消失等等，在這裡我記錄了一些解決的方式。
最快解決方案 - 指令 基本上最快的方式就是去終端機下指令，直接由指 …</p>

    
  </div>
</article>
            </div>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</section>




  <footer class="section-sm">
  <div class="container">
    <div class="row justify-content-center align-items-center">
      <div class="col-lg-5">
        
        
        
      </div>
      <div class="col-lg-12 text-center mt-5">
        <ul class="list-inline footer-menu mb-4">
          
          <li class="list-inline-item mx-3"><a href="https://martinios.com/about/">關於</a></li>
          
          <li class="list-inline-item mx-3"><a href="https://martinios.com/categories/">分類</a></li>
          
          <li class="list-inline-item mx-3"><a href="https://martinios.com/tags/">標籤</a></li>
          
          <li class="list-inline-item mx-3"><a href="https://martinios.com/contact/">聯絡我</a></li>
          
        </ul>
        <ul class="social-links icon-box list-unstyled list-inline font-weight-500 mb-3">
          
          <li class="list-inline-item text-center"><a href="https://www.facebook.com/" aria-label="social-icon">
            <i class="lab lab la-facebook-f"></i>
          </a></li>
          
          <li class="list-inline-item text-center"><a href="https://www.instagram.com/pmthinking/" aria-label="social-icon">
            <i class="lab lab la-instagram"></i>
          </a></li>
          
          <li class="list-inline-item text-center"><a href="https://www.linkedin.com/" aria-label="social-icon">
            <i class="lab lab la-linkedin-in"></i>
          </a></li>
          
        </ul>
        
        <p class="mb-0 font-weight-500 copyright-text content">Designed &amp; Developed By <a href="https://martinhuang0933.github.io/">Martin Huang</a></p>
        
      </div>
    </div>
  </div>
</footer>
  




  



  



  



  



  



  




<script data-turbolinks-suppress-warning src="/js/vendor.min.104c16bb588dd60f4bc0cbb9828dcf214eb0a6775f69f74f025b75dc5aac73eb47da26aef00c8f4e3d7a85099a8054c195d03d63aa88d1b4213a47274755994e.js" integrity="sha512-EEwWu1iN1g9LwMu5go3PIU6wpndfafdPAlt13Fqsc&#43;tH2iau8AyPTj16hQmagFTBldA9Y6qI0bQhOkcnR1WZTg=="></script>



</body>

</html>